<div class="calendar-container">
    <div class="calendar-header">
      <h2>Kalender</h2>
      
      <div class="view-controls">
        <button [class.active]="viewMode === 'day'" (click)="changeViewMode('day')">Tag</button>
        <button [class.active]="viewMode === 'week'" (click)="changeViewMode('week')">Woche</button>
        <button [class.active]="viewMode === 'month'" (click)="changeViewMode('month')">Monat</button>
      </div>
      
      <div class="date-controls">
        <button (click)="goToToday()">Heute</button>
        <button (click)="navigatePeriod(-1)">←</button>
        <button (click)="navigatePeriod(1)">→</button>
        <span>{{ formatDate(currentDate) }}</span>
      </div>
      
      <div class="search-controls">
        <input type="text" placeholder="Termine suchen...">
        <button>Termin</button>
      </div>
    </div>
    
    <!-- Tagesansicht -->
    <div *ngIf="viewMode === 'day'" class="day-view">
      <div class="day-header">
        <h3>{{ formatDate(currentDate) }}</h3>
      </div>
      
      <div class="day-timeline">
        <div *ngFor="let time of timeSlots" class="time-slot">
          <div class="time-label">{{ formatTime(time) }}</div>
          <div class="time-content"></div>
        </div>
        
        <!-- Appointments -->
        <div *ngFor="let appointment of getAppointmentsForDay(currentDate)" 
             class="appointment"
             [ngStyle]="{
               'top': getAppointmentPosition(appointment).top,
               'height': getAppointmentPosition(appointment).height,
               'background-color': appointment.status === 'pending' ? '#FFD54F' : '#E5887D'
             }">
          <div class="appointment-title">{{ appointment.serviceName }}</div>
          <div class="appointment-time">
            {{ formatTime(appointment.startTime) }} - {{ formatTime(appointment.endTime) }}
          </div>
          <div class="appointment-customer">{{ appointment.customerName }}</div>
        </div>
      </div>
    </div>
    
    <!-- Wochenansicht -->
    <div *ngIf="viewMode === 'week'" class="week-view">
      <!-- Wochenüberschriften -->
      <div class="week-header">
        <div class="time-header"></div>
        <div *ngFor="let day of weekDays" class="day-column" [class.today]="isToday(day)">
          {{ formatDayShort(day) }} {{ day.getDate() }}
        </div>
      </div>
      
      <!-- Wochenraster -->
      <div class="week-grid">
        <!-- Zeitraster links -->
        <div class="time-column">
          <div *ngFor="let time of timeSlots" class="time-cell">
            {{ formatTime(time) }}
          </div>
        </div>
        
        <!-- Tagesraster mit Terminen -->
        <div *ngFor="let day of weekDays" class="day-column" [class.today]="isToday(day)">
          <!-- Zeitraster für den Tag -->
          <div *ngFor="let time of timeSlots" class="time-cell"></div>
          
          <!-- Container für Termine (wichtig für korrekte Positionierung) -->
          <div class="day-content">
            <!-- Termine für diesen Tag -->
            <div *ngFor="let appointment of getAppointmentsForDay(day)" 
                 class="appointment"
                 [ngStyle]="{
                   'top': getAppointmentPosition(appointment).top,
                   'height': getAppointmentPosition(appointment).height,
                   'background-color': appointment.status === 'pending' ? '#FFD54F' : '#E5887D'
                 }">
              <div class="appointment-title">{{ appointment.serviceName }}</div>
              <div class="appointment-time">
                {{ formatTime(appointment.startTime) }} - {{ formatTime(appointment.endTime) }}
              </div>
              <div class="appointment-customer">{{ appointment.customerName }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Monatsansicht -->
    <div *ngIf="viewMode === 'month'" class="month-view">
      <div class="month-header">
        <div *ngFor="let day of ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So']" class="week-day">
          {{ day }}
        </div>
      </div>
      
      <!-- Vereinfachte Monatsansicht für den Moment -->
      <div class="month-grid">
        <div *ngFor="let day of weekDays" class="month-day" [class.today]="isToday(day)">
          <div class="day-number">{{ day.getDate() }}</div>
          <div *ngFor="let appointment of getAppointmentsForDay(day)" class="month-appointment">
            {{ formatTime(appointment.startTime) }} {{ appointment.serviceName }}
          </div>
        </div>
      </div>
    </div>
  </div>