<div class="booking-container">
  <div class="booking-header" *ngIf="provider">
    <h2>Termin bei {{ provider.businessName }} buchen</h2>
    <div class="service-info" *ngIf="selectedService">
      <h3>{{ selectedService.name }}</h3>
      <div class="service-details">
        <span class="service-duration">{{ selectedService.duration }} Minuten</span>
        <span class="service-price">{{ selectedService.price }} €</span>
      </div>
    </div>
  </div>

  <div class="booking-content">
    <!-- Datumsauswahl -->
    <div class="date-selection">
      <h3>Datum auswählen</h3>
      <div class="calendar-nav">
        <button class="nav-button prev" (click)="generateCalendarDays(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1, 1))">
          &lt;
        </button>
        <span class="current-month">
          {{ currentMonth | date:'MMMM yyyy' }}
        </span>
        <button class="nav-button next" (click)="generateCalendarDays(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 1))">
          &gt;
        </button>
      </div>

      <div class="date-grid">
        <div *ngFor="let day of calendarDays" 
             class="day-item" 
             [class.today]="isToday(day)"
             [class.selected]="isSelected(day)"
             (click)="selectDate(day)">
          <div class="day-number">{{ day.getDate() }}</div>
          <div class="day-name">{{ day | date:'EEE' }}</div>
        </div>
      </div>
    </div>

    <!-- Zeitauswahl -->
    <div class="time-selection" *ngIf="selectedService">
      <h3>Uhrzeit auswählen für {{ selectedDate | date:'EEEE, d. MMMM' }}</h3>
      
      <div *ngIf="availableTimeSlots.length === 0" class="no-slots-message">
        <p>Keine Termine verfügbar für diesen Tag.</p>
        <p>Bitte wählen Sie ein anderes Datum.</p>
      </div>

      <div *ngIf="availableTimeSlots.length > 0" class="time-slots-grid">
        <button 
          *ngFor="let slot of availableTimeSlots" 
          class="time-slot" 
          [class.available]="slot.available"
          [class.unavailable]="!slot.available"
          [class.selected]="slot.isSelected"
          [disabled]="!slot.available"
          (click)="selectTimeSlot(slot)">
          {{ formatTime(slot.time) }}
        </button>
      </div>
    </div>
  </div>

  <!-- Aktionsleiste -->
  <div class="booking-actions">
    <button class="btn-back" (click)="router.navigate(['/services', providerId])">Zurück</button>
    <button 
      class="btn-next" 
      [disabled]="!selectedTimeSlot" 
      (click)="proceedToBooking()">
      Weiter zur Buchung
    </button>
  </div>
</div>